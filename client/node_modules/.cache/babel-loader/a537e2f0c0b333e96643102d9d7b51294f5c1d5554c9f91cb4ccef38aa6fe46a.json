{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport \"/public/assets/css/materialize.css\";\nimport \"/public/assets/css/style.css\";\nimport \"/public/assets/js/materialize.js\";\nimport \"/public/assets/js/init.js\";\nimport store from \"../../vuex/store\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nimport { io } from \"socket.io-client\";\nexport default {\n  name: \"AppHeader\",\n  data() {\n    return {\n      search: \"\"\n    };\n  },\n  computed: {\n    user: function () {\n      return store.getters.getUser;\n    },\n    login: function () {\n      return store.getters.getLogin;\n    },\n    cartCounter: function () {\n      return store.getters.getCartCounter;\n    }\n  },\n  methods: {\n    doLogout: async function () {\n      const response = await axios.post(this.$apiURL + \"/logout\", null, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        // remove access token from local storage\n        localStorage.removeItem(this.$accessTokenKey);\n        this.$headers = {\n          'Content-Type': 'application/json',\n          'Authorization': 'Bearer '\n        };\n        store.commit(\"setLogin\", false);\n        store.commit(\"setUser\", null);\n        this.$router.push(\"/login\");\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n    },\n    getUser: async function () {\n      // check if user is logged in\n      if (localStorage.getItem(this.$accessTokenKey)) {\n        const response = await axios.post(this.$apiURL + \"/getUser\", null, {\n          headers: this.$headers\n        });\n        if (response.data.status == \"success\") {\n          // user is logged in\n          store.commit(\"setUser\", response.data.user);\n          global.socketIO.emit(\"connected\", response.data.user.email);\n          global.socketIO.on(\"newMessage\", function (message) {\n            store.commit(\"appendMessage\", message);\n            M.toast({\n              html: 'New message has been received.'\n            });\n          });\n          setTimeout(function () {\n            var elems = document.querySelectorAll('.dropdown-trigger');\n            var instances = M.Dropdown.init(elems, {});\n          }, 500);\n        } else {\n          // user is logged out\n          localStorage.removeItem(this.$accessTokenKey);\n        }\n        store.commit(\"setLogin\", localStorage.getItem(this.$accessTokenKey) != null);\n      }\n    },\n    doSearch: function () {\n      store.commit(\"setSearch\", this.search);\n    }\n  },\n  mounted: function () {\n    const cookieParts = document.cookie.split(\"; \");\n    for (let a = 0; a < cookieParts.length; a++) {\n      const keyValue = cookieParts[a].split(\"=\");\n      if (keyValue[0] == \"products\") {\n        const products = JSON.parse(keyValue[1]);\n        store.commit(\"setCartCounter\", products.length);\n      }\n    }\n    global.socketIO = io(this.$apiURL);\n    this.getUser();\n    var elems = document.querySelectorAll('.sidenav');\n    M.Sidenav.init(elems, {});\n  }\n};","map":{"version":3,"names":["store","axios","swal","io","name","data","search","computed","user","getters","getUser","login","getLogin","cartCounter","getCartCounter","methods","doLogout","response","post","$apiURL","headers","$headers","status","localStorage","removeItem","$accessTokenKey","commit","$router","push","fire","message","getItem","global","socketIO","emit","email","on","M","toast","html","setTimeout","elems","document","querySelectorAll","instances","Dropdown","init","doSearch","mounted","cookieParts","cookie","split","a","length","keyValue","products","JSON","parse","Sidenav"],"sources":["C:\\Users\\arbid\\OneDrive\\Desktop\\TechnoStoreAR-main\\client\\src\\components\\layouts\\AppHeader.vue"],"sourcesContent":["<template>\n  <nav class=\"light-lue lighten-1\" role=\"navigation\">\n    <div class=\"nav-wrapper container\">\n\n      <router-link id=\"logo-container\" to=\"/\" class=\"brand-logo\">TechnoStore AR</router-link>\n\n      <ul class=\"right hide-on-med-and-down\">\n        <li>\n          <form style=\"position: relative; top: 10px;\" v-on:submit.prevent=\"doSearch\">\n            <div class=\"input-field\">\n              <input id=\"search\" type=\"search\" v-model=\"search\" style=\"height: 50px;\" />\n              <label class=\"label-icon\" for=\"search\"><i class=\"material-icons\" style=\"line-height: 50px; padding: 5px;\">search</i></label>\n              <i class=\"material-icons\" style=\"line-height: 50px;\">close</i>\n            </div>\n          </form>\n        </li>\n\n        <li class=\"nav-item\" v-if=\"!login\">\n          <router-link class=\"nav-link\" to=\"/login\">Login</router-link>\n        </li>\n\n        <li class=\"nav-item\" v-if=\"!login\">\n          <router-link class=\"nav-link\" to=\"/register\">Register</router-link>\n        </li>\n\n        <li v-if=\"user != null\">\n           <!-- Dropdown Trigger -->\n            <a class='dropdown-trigger' href='javascript:void(0)' data-target='dropdown-user' v-text=\"user.name\"></a>\n\n            <!-- Dropdown Structure -->\n            <ul id='dropdown-user' class='dropdown-content' style=\"width: 140px;\">\n              <li><a href=\"javascript:void(0)\" v-on:click=\"doLogout\">Logout</a></li>\n            </ul>\n        </li>\n        <li>\n          <router-link to=\"/news\">News</router-link>\n        </li>\n        <li>\n          <router-link to=\"/events\">Events</router-link>\n        </li>\n        <li>\n          <router-link to=\"/aboutUs\">About Us</router-link>\n        </li>\n        <li>\n          <router-link to=\"/contactUs\">Contact Us</router-link>\n        </li>\n        <li>\n          <router-link to=\"/cart\">CART <span v-if=\"cartCounter > 0\" v-text=\"'(' + cartCounter + ')'\"></span></router-link>\n        </li>\n      </ul>\n\n      <ul id=\"nav-mobile\" class=\"sidenav\">\n      </ul>\n      <a href=\"#\" data-target=\"nav-mobile\" class=\"sidenav-trigger\"><i class=\"material-icons\">Menu</i></a>\n    </div>\n  </nav>\n</template>\n\n<script>\n\n  import \"/public/assets/css/materialize.css\"\n  import \"/public/assets/css/style.css\"\n\n  import \"/public/assets/js/materialize.js\"\n  import \"/public/assets/js/init.js\"\n\n  import store from \"../../vuex/store\"\n  import axios from \"axios\"\n  import swal from \"sweetalert2\"\n\n  import { io } from \"socket.io-client\"\n\n  export default {\n    name: \"AppHeader\",\n\n    data() {\n      return {\n        search: \"\"\n      }\n    },\n\n    computed: {\n      user: function () {\n        return store.getters.getUser\n      },\n\n      login: function () {\n        return store.getters.getLogin\n      },\n\n      cartCounter: function() {\n        return store.getters.getCartCounter\n      }\n    },\n\n    methods: {\n      doLogout: async function () {\n        const response = await axios.post(\n          this.$apiURL + \"/logout\",\n          null,\n          {\n            headers: this.$headers\n          }\n        )\n\n        if (response.data.status == \"success\") {\n          // remove access token from local storage\n          localStorage.removeItem(this.$accessTokenKey)\n\n          this.$headers = {\n            'Content-Type': 'application/json',\n            'Authorization': 'Bearer '\n          }\n\n          store.commit(\"setLogin\", false)\n          store.commit(\"setUser\", null)\n\n          this.$router.push(\"/login\")\n        } else {\n          swal.fire(\"Error\", response.data.message, \"error\")\n        }\n      },\n\n      getUser: async function () {\n\n        // check if user is logged in\n        if (localStorage.getItem(this.$accessTokenKey)) {\n\n          const response = await axios.post(\n            this.$apiURL + \"/getUser\",\n            null,\n            {\n                headers: this.$headers\n            }\n          )\n\n          if (response.data.status == \"success\") {\n            // user is logged in\n            store.commit(\"setUser\", response.data.user)\n\n            global.socketIO.emit(\"connected\", response.data.user.email)\n\n            global.socketIO.on(\"newMessage\", function (message) {\n              store.commit(\"appendMessage\", message)\n              M.toast({html: 'New message has been received.'})\n            })\n\n            setTimeout(function () {\n              var elems = document.querySelectorAll('.dropdown-trigger')\n              var instances = M.Dropdown.init(elems, {})\n            }, 500)\n          } else {\n            // user is logged out\n            localStorage.removeItem(this.$accessTokenKey)\n          }\n\n          store.commit(\"setLogin\", (localStorage.getItem(this.$accessTokenKey) != null))\n        }\n      },\n\n      doSearch: function () {\n        store.commit(\"setSearch\", this.search)\n      }\n    },\n\n    mounted: function () {\n      const cookieParts = document.cookie.split(\"; \")\n      for (let a = 0; a < cookieParts.length; a++) {\n        const keyValue = cookieParts[a].split(\"=\")\n        if (keyValue[0] == \"products\") {\n          const products = JSON.parse(keyValue[1])\n          store.commit(\"setCartCounter\", products.length)\n        }\n      }\n\n      global.socketIO = io(this.$apiURL)\n      this.getUser()\n\n      var elems = document.querySelectorAll('.sidenav')\n      M.Sidenav.init(elems, {})\n    }\n  }\n</script>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}