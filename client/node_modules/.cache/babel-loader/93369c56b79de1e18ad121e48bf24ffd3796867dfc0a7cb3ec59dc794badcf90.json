{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nexport default {\n  props: ['apiKey'],\n  data: () => {\n    return {\n      apiUrl: '',\n      isBusy: false,\n      showloader: false,\n      currentPage: 1,\n      totalResults: 0,\n      maxPerPage: 20,\n      searchword: '',\n      articles: [],\n      country: 'us'\n    };\n  },\n  computed: {\n    pageCount() {\n      return Math.ceil(this.totalResults / this.maxPerPage);\n    }\n  },\n  methods: {\n    navTo(url) {\n      window.open(url);\n    },\n    resetData() {\n      this.currentPage = 1;\n      this.articles = [];\n    },\n    fetchSearchNews() {\n      if (this.searchword !== '') {\n        this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n        this.isBusy = true;\n        this.resetData();\n        this.fetchData();\n      } else {\n        this.fetchTopNews();\n      }\n    },\n    fetchTopNews() {\n      this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.country + '&pageSize=' + this.maxPerPage + '&apiKey=' + this.apiKey;\n      this.isBusy = true;\n      this.searchword = '';\n      this.resetData();\n      this.fetchData();\n    },\n    fetchData() {\n      let req = new Request(this.apiUrl + '&page=' + this.currentPage);\n      fetch(req).then(resp => resp.json()).then(data => {\n        this.totalResults = data.totalResults;\n        data.articles.forEach(element => {\n          this.articles.push(element);\n        });\n        this.isBusy = false;\n        this.showloader = false;\n      }).catch(error => {\n        console.log(error);\n      });\n    },\n    scrollTrigger() {\n      const observer = new IntersectionObserver(entries => {\n        entries.forEach(entry => {\n          if (entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\n            this.showloader = true;\n            this.currentPage += 1;\n            this.fetchData();\n          }\n        });\n      });\n      observer.observe(this.$refs.infinitescrolltrigger);\n    }\n  },\n  created() {\n    this.fetchTopNews();\n  },\n  mounted() {\n    this.scrollTrigger();\n  }\n};","map":{"version":3,"names":["props","data","apiUrl","isBusy","showloader","currentPage","totalResults","maxPerPage","searchword","articles","country","computed","pageCount","Math","ceil","methods","navTo","url","window","open","resetData","fetchSearchNews","apiKey","fetchData","fetchTopNews","req","Request","fetch","then","resp","json","forEach","element","push","catch","error","console","log","scrollTrigger","observer","IntersectionObserver","entries","entry","intersectionRatio","observe","$refs","infinitescrolltrigger","created","mounted"],"sources":["C:\\Users\\PULSE Electronics\\OneDrive\\Desktop\\TechnoStoreAR\\client\\src\\components\\NewsComponent.vue"],"sourcesContent":["<template>\r\n    <div class=\"container\">\r\n      <div class=\"searchbar\">\r\n        <form @submit.prevent=\"fetchSearchNews\">\r\n          <input type=\"text\" placeholder=\"search...\" v-model=\"searchword\">\r\n        </form>\r\n        <div class=\"search-icons\">\r\n          <i v-if=\"!isBusy\" class=\"fas fa-search\" @click=\"fetchSearchNews\"></i>\r\n          <i v-else class=\"fas fa-spinner fa-spin\"></i>\r\n          <i class=\"fas fa-times\" @click=\"fetchTopNews\"></i>\r\n        </div>\r\n      </div>\r\n      <div class=\"result-list\">\r\n        <article v-for=\"(article, index) in articles\" :key=\"index\" @click=\"navTo(article.url)\">\r\n          <header>\r\n            <img v-if=\"article.urlToImage\" :src=\"article.urlToImage\" alt=\"\">\r\n            <i v-else class=\"fas fa-image\"></i>\r\n          </header>\r\n          <section v-html=\"article.title\"></section>\r\n          <footer>\r\n            <i class=\"fas fa-chevron-right\"></i>\r\n          </footer>\r\n        </article>\r\n      </div>\r\n      <div ref=\"infinitescrolltrigger\" id=\"scroll-trigger\">\r\n        <i v-if=\"showloader\" class=\"fas fa-spinner fa-spin\"></i>\r\n      </div>\r\n    </div>\r\n  </template>\r\n  \r\n  <script>\r\n    export default {\r\n      props: [\r\n        'apiKey'\r\n      ],\r\n      data: () => {\r\n        return {\r\n          apiUrl: '',\r\n          isBusy: false,\r\n          showloader: false,\r\n          currentPage: 1,\r\n          totalResults: 0,\r\n          maxPerPage: 20,\r\n          searchword: '',\r\n          articles: [],\r\n          country: 'us'\r\n        }\r\n      },\r\n      computed: {\r\n        pageCount() {\r\n          return Math.ceil(this.totalResults/this.maxPerPage);\r\n        }\r\n      },\r\n      methods: {\r\n        navTo(url) {\r\n          window.open(url);\r\n        },\r\n        resetData() {\r\n          this.currentPage = 1;\r\n          this.articles = [];\r\n        },\r\n        fetchSearchNews() {\r\n          if(this.searchword !== '')\r\n          {\r\n            this.apiUrl = 'https://newsapi.org/v2/everything?q=' + this.searchword +\r\n                          '&pageSize=' + this.maxPerPage +\r\n                          '&apiKey=' + this.apiKey;\r\n            this.isBusy = true;\r\n            this.resetData();\r\n            this.fetchData();\r\n          }\r\n          else {\r\n            this.fetchTopNews();\r\n          }\r\n        },\r\n        fetchTopNews() {\r\n          this.apiUrl = 'https://newsapi.org/v2/top-headlines?country=' + this.country +\r\n                          '&pageSize=' + this.maxPerPage +\r\n                          '&apiKey=' + this.apiKey;\r\n          this.isBusy = true;\r\n          this.searchword = '';\r\n          \r\n          this.resetData();\r\n          this.fetchData();\r\n        },\r\n        fetchData() {\r\n          let req  = new Request(this.apiUrl + '&page=' + this.currentPage);\r\n          fetch(req)\r\n            .then((resp) => resp.json())\r\n            .then((data) => {\r\n              this.totalResults = data.totalResults;\r\n              data.articles.forEach(element => {\r\n                this.articles.push(element);\r\n              });\r\n              this.isBusy = false;\r\n              this.showloader = false;\r\n            })\r\n            .catch((error) => {\r\n              console.log(error);\r\n            })\r\n        },\r\n        scrollTrigger() {\r\n          const observer = new IntersectionObserver((entries) => {\r\n            entries.forEach(entry => {\r\n              if(entry.intersectionRatio > 0 && this.currentPage < this.pageCount) {\r\n                this.showloader = true;\r\n                this.currentPage += 1;\r\n                this.fetchData();\r\n              }\r\n            });\r\n          });\r\n          observer.observe(this.$refs.infinitescrolltrigger);\r\n        }\r\n      },\r\n      created() {\r\n        this.fetchTopNews();\r\n      },\r\n      mounted() {\r\n        this.scrollTrigger();\r\n      }\r\n    }\r\n  </script>\r\n  \r\n  <style lang=\"scss\" scoped>\r\n    .container {\r\n      position: relative;\r\n      .searchbar {\r\n        position: absolute;\r\n        top: 0;\r\n        left: 0;\r\n        right: 0;\r\n        width: 100%;\r\n        height: 60px;\r\n        font-size: 1.6rem;\r\n        input {\r\n          padding: 0 100px 0 20px;\r\n          margin: 0;\r\n          width: calc(100% - 120px);\r\n          height: 60px;\r\n          border: none;\r\n          font-size: 2rem;\r\n          color: #fff;\r\n          background-color: #222;\r\n          &:focus {\r\n            outline: none;\r\n          }\r\n        }\r\n        .search-icons {\r\n          position: absolute;\r\n          right: 20px;\r\n          top: 20px;\r\n          color: #fff;\r\n          i {\r\n            margin-left: 15px;\r\n            cursor: pointer;\r\n          }\r\n        }\r\n      }\r\n      .result-list {\r\n        padding-top: 60px;\r\n      }\r\n      article {\r\n        display: grid;\r\n        grid-template-columns: 200px auto 40px;\r\n        grid-template-rows: 100px;\r\n        border-bottom: 1px solid #ccc;\r\n        overflow: hidden;\r\n        cursor: pointer;\r\n        header {\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          overflow: hidden;\r\n          img {\r\n            max-width: 100%;\r\n            height: auto;\r\n          }\r\n          i {\r\n            font-size: 2rem;\r\n          }\r\n        }\r\n        section {\r\n          margin: 0;\r\n          padding: 10px;\r\n          height: 100px;\r\n        }\r\n        footer {\r\n          display: flex;\r\n          justify-content: center;\r\n          align-items: center;\r\n          font-size: 1.6rem;\r\n          color: #888;\r\n        }\r\n      }\r\n      #scroll-trigger {\r\n        display: flex;\r\n        justify-content: center;\r\n        align-items: center;\r\n        width: 100%;\r\n        height: 100px;\r\n        font-size: 1.6rem;\r\n      }\r\n    }\r\n  </style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}