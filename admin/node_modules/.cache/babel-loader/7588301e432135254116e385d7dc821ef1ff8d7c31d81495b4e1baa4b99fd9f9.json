{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      _id: this.$route.params._id,\n      product: null,\n      categories: [],\n      category: \"\"\n    };\n  },\n  methods: {\n    addSpec: function () {\n      this.product.specs.push({\n        key: '',\n        value: ''\n      });\n    },\n    removeSpec: function (index) {\n      this.product.specs.splice(index, 1);\n    },\n    onchangeCategory: function () {\n      this.category = event.target.value;\n    },\n    getData: async function () {\n      const formData = new FormData();\n      formData.append(\"_id\", this._id);\n      const response = await axios.post(this.$apiURL + \"/admin/products/fetchSingle\", formData, {\n        headers: this.$headers\n      });\n      if (response.data.status == \"success\") {\n        this.product = response.data.product;\n        this.category = this.product.category;\n      } else {\n        swal.fire(\"Error\", response.data.message, \"error\");\n      }\n      const responseConfig = await axios.post(this.$apiURL + \"/getConfigurations\", null);\n      if (responseConfig.data.status == \"success\") {\n        let configurations = responseConfig.data.configurations;\n        this.categories = configurations.categories || [];\n      }\n    },\n    editProduct: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"_id\", this._id);\n      formData.append(\"specs\", JSON.stringify(this.product.specs));\n      const response = await axios.post(this.$apiURL + \"/admin/products/update\", formData, {\n        headers: this.$headers\n      });\n      swal.fire(\"Edit product\", response.data.message, response.data.status);\n    }\n  },\n  mounted: function () {\n    this.getData();\n  }\n};","map":{"version":3,"names":["axios","swal","data","_id","$route","params","product","categories","category","methods","addSpec","specs","push","key","value","removeSpec","index","splice","onchangeCategory","event","target","getData","formData","FormData","append","response","post","$apiURL","headers","$headers","status","fire","message","responseConfig","configurations","editProduct","form","JSON","stringify","mounted"],"sources":["C:\\Users\\arbid\\OneDrive\\Desktop\\TechnoStoreAR\\admin\\src\\components\\EditProduct.vue"],"sourcesContent":["<template>\n    <!-- End Navbar -->\n    <div class=\"container-fluid py-4\">\n        <div class=\"row\">\n            <div class=\"col-md-12\">\n                <div class=\"card\">\n                    <div class=\"card-header\">\n                        <h4 class=\"font-weight-bolder\">Edit product</h4>\n                    </div>\n\n                    <div class=\"card-body\">\n                        <form v-on:submit.prevent=\"editProduct\" enctype=\"multipart/form-data\" v-if=\"product != null\">\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Name</label>\n                                <input type=\"text\" class=\"form-control\" autocomplete=\"off\" name=\"name\" v-bind:value=\"product.name\" required />\n                            </div>\n\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Description</label>\n                                <textarea name=\"description\" style=\"margin-top: 40px;\" class=\"form-control\" required v-bind:value=\"product.description\"></textarea>\n                            </div>\n\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Price (â‚¬)</label>\n                                <input type=\"number\" min=\"0\" name=\"price\" autocomplete=\"off\" class=\"form-control\" required v-bind:value=\"product.price\" />\n                            </div>\n\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Items in stock (0 means unlimited, for digital products)</label>\n                                <input type=\"number\" min=\"0\" autocomplete=\"off\" name=\"itemsInStock\" class=\"form-control\" v-bind:value=\"product.itemsInStock || 0\" required />\n                            </div>\n\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Categories</label>\n                                <select name=\"categories[]\" class=\"form-control\" v-on:change=\"onchangeCategory\">\n                                    <option value=\"\">Select category</option>\n                                    <option v-for=\"category in categories\" v-text=\"category\" v-bind:value=\"category\"></option>\n                                </select>\n                            </div>\n\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Add new category</label>\n                                <input type=\"text\" name=\"category\" autocomplete=\"off\" v-bind:value=\"category\" class=\"form-control\" />\n                            </div>\n\n                            <h3>Specifications</h3>\n                            <div class=\"row\" v-for=\"(spec, index) in product.specs\">\n                                <div class=\"col-md-6\">\n                                    <div class=\"input-group input-group-outline mb-3\">\n                                        <label class=\"form-label no-left-margin\">Key</label>\n                                        <input type=\"text\" autocomplete=\"off\" v-model=\"spec.key\" class=\"form-control\" required />\n                                    </div>\n                                </div>\n\n                                <div class=\"col-md-6\">\n                                    <div class=\"input-group input-group-outline mb-3\">\n                                        <label class=\"form-label no-left-margin\">Value</label>\n                                        <input type=\"text\" autocomplete=\"off\" v-model=\"spec.value\" class=\"form-control\" required />\n\n                                        <i class=\"fa fa-close\" style=\"position: relative;\n                                            top: 50px;\n                                            left: 10px;\n                                            cursor: pointer;\" v-on:click=\"removeSpec(index)\"></i>\n                                    </div>\n                                </div>\n                            </div>\n\n                            <button type=\"button\" v-on:click=\"addSpec\" class=\"btn bg-gradient-primary mt-4 mb-0\">Add specs</button>\n\n                            <div class=\"input-group input-group-outline mb-3\">\n                                <label class=\"form-label no-left-margin\">Images</label>\n                                <input type=\"file\" multiple accept=\"image/*\" name=\"images\" class=\"form-control\" />\n                            </div>\n\n                            <img v-for=\"(image) in product.images\" v-bind:src=\"$apiURL + '/' + image\" style=\"display: inline-block; width: 100%; margin-top: 10px;\" />\n\n                            <div class=\"text-center\">\n                                <button type=\"submit\" class=\"btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0\">Edit product</button>\n                            </div>\n                        </form>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n</template>\n\n<script>\n\n    import axios from \"axios\"\n    import swal from \"sweetalert2\"\n\n    export default {\n        data() {\n            return {\n                _id: this.$route.params._id,\n                product: null,\n                categories: [],\n                category: \"\"\n            }\n        },\n\n        methods: {\n            addSpec: function () {\n                this.product.specs.push({\n                    key: '',\n                    value: ''\n                })\n            },\n\n            removeSpec: function (index) {\n                this.product.specs.splice(index, 1)\n            },\n\n            onchangeCategory: function () {\n                this.category = event.target.value\n            },\n\n            getData: async function () {\n                const formData = new FormData()\n                formData.append(\"_id\", this._id)\n\n                const response = await axios.post(\n                    this.$apiURL + \"/admin/products/fetchSingle\",\n                    formData,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                if (response.data.status == \"success\") {\n                    this.product = response.data.product\n                    this.category = this.product.category\n                } else {\n                    swal.fire(\"Error\", response.data.message, \"error\")\n                }\n\n                const responseConfig = await axios.post(\n                    this.$apiURL + \"/getConfigurations\",\n                    null\n                )\n\n                if (responseConfig.data.status == \"success\") {\n                    let configurations = responseConfig.data.configurations\n                    this.categories = configurations.categories || []\n                }\n            },\n\n            editProduct: async function () {\n                const form = event.target\n                const formData = new FormData(form)\n                formData.append(\"_id\", this._id)\n                formData.append(\"specs\", JSON.stringify(this.product.specs))\n\n                const response = await axios.post(\n                    this.$apiURL + \"/admin/products/update\",\n                    formData,\n                    {\n                        headers: this.$headers\n                    }\n                )\n\n                swal.fire(\"Edit product\", response.data.message, response.data.status)\n            }\n        },\n\n        mounted: function () {\n            this.getData()\n        }\n    }\n</script>\n\n<style>\n    .no-left-margin::before {\n        width: auto !important;\n    }\n</style>"],"mappings":";AAyFI,OAAOA,KAAI,MAAO,OAAM;AACxB,OAAOC,IAAG,MAAO,aAAY;AAE7B,eAAe;EACXC,IAAIA,CAAA,EAAG;IACH,OAAO;MACHC,GAAG,EAAE,IAAI,CAACC,MAAM,CAACC,MAAM,CAACF,GAAG;MAC3BG,OAAO,EAAE,IAAI;MACbC,UAAU,EAAE,EAAE;MACdC,QAAQ,EAAE;IACd;EACJ,CAAC;EAEDC,OAAO,EAAE;IACLC,OAAO,EAAE,SAAAA,CAAA,EAAY;MACjB,IAAI,CAACJ,OAAO,CAACK,KAAK,CAACC,IAAI,CAAC;QACpBC,GAAG,EAAE,EAAE;QACPC,KAAK,EAAE;MACX,CAAC;IACL,CAAC;IAEDC,UAAU,EAAE,SAAAA,CAAUC,KAAK,EAAE;MACzB,IAAI,CAACV,OAAO,CAACK,KAAK,CAACM,MAAM,CAACD,KAAK,EAAE,CAAC;IACtC,CAAC;IAEDE,gBAAgB,EAAE,SAAAA,CAAA,EAAY;MAC1B,IAAI,CAACV,QAAO,GAAIW,KAAK,CAACC,MAAM,CAACN,KAAI;IACrC,CAAC;IAEDO,OAAO,EAAE,eAAAA,CAAA,EAAkB;MACvB,MAAMC,QAAO,GAAI,IAAIC,QAAQ,EAAC;MAC9BD,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAE,IAAI,CAACrB,GAAG;MAE/B,MAAMsB,QAAO,GAAI,MAAMzB,KAAK,CAAC0B,IAAI,CAC7B,IAAI,CAACC,OAAM,GAAI,6BAA6B,EAC5CL,QAAQ,EACR;QACIM,OAAO,EAAE,IAAI,CAACC;MAClB,EACJ;MAEA,IAAIJ,QAAQ,CAACvB,IAAI,CAAC4B,MAAK,IAAK,SAAS,EAAE;QACnC,IAAI,CAACxB,OAAM,GAAImB,QAAQ,CAACvB,IAAI,CAACI,OAAM;QACnC,IAAI,CAACE,QAAO,GAAI,IAAI,CAACF,OAAO,CAACE,QAAO;MACxC,OAAO;QACHP,IAAI,CAAC8B,IAAI,CAAC,OAAO,EAAEN,QAAQ,CAACvB,IAAI,CAAC8B,OAAO,EAAE,OAAO;MACrD;MAEA,MAAMC,cAAa,GAAI,MAAMjC,KAAK,CAAC0B,IAAI,CACnC,IAAI,CAACC,OAAM,GAAI,oBAAoB,EACnC,IAAG,CACP;MAEA,IAAIM,cAAc,CAAC/B,IAAI,CAAC4B,MAAK,IAAK,SAAS,EAAE;QACzC,IAAII,cAAa,GAAID,cAAc,CAAC/B,IAAI,CAACgC,cAAa;QACtD,IAAI,CAAC3B,UAAS,GAAI2B,cAAc,CAAC3B,UAAS,IAAK,EAAC;MACpD;IACJ,CAAC;IAED4B,WAAW,EAAE,eAAAA,CAAA,EAAkB;MAC3B,MAAMC,IAAG,GAAIjB,KAAK,CAACC,MAAK;MACxB,MAAME,QAAO,GAAI,IAAIC,QAAQ,CAACa,IAAI;MAClCd,QAAQ,CAACE,MAAM,CAAC,KAAK,EAAE,IAAI,CAACrB,GAAG;MAC/BmB,QAAQ,CAACE,MAAM,CAAC,OAAO,EAAEa,IAAI,CAACC,SAAS,CAAC,IAAI,CAAChC,OAAO,CAACK,KAAK,CAAC;MAE3D,MAAMc,QAAO,GAAI,MAAMzB,KAAK,CAAC0B,IAAI,CAC7B,IAAI,CAACC,OAAM,GAAI,wBAAwB,EACvCL,QAAQ,EACR;QACIM,OAAO,EAAE,IAAI,CAACC;MAClB,EACJ;MAEA5B,IAAI,CAAC8B,IAAI,CAAC,cAAc,EAAEN,QAAQ,CAACvB,IAAI,CAAC8B,OAAO,EAAEP,QAAQ,CAACvB,IAAI,CAAC4B,MAAM;IACzE;EACJ,CAAC;EAEDS,OAAO,EAAE,SAAAA,CAAA,EAAY;IACjB,IAAI,CAAClB,OAAO,EAAC;EACjB;AACJ"},"metadata":{},"sourceType":"module","externalDependencies":[]}