{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from \"axios\";\nimport swal from \"sweetalert2\";\nexport default {\n  data() {\n    return {\n      categories: [],\n      category: \"\",\n      specs: [],\n      images: []\n    };\n  },\n  methods: {\n    previewImages: function () {\n      const self = this;\n      const files = this.$refs[\"images\"].files;\n      for (let a = 0; a < files.length; a++) {\n        const file = files[a];\n        const fileReader = new FileReader();\n        fileReader.onload = function (event) {\n          self.images[a] = {\n            src: event.target.result,\n            size: files[a].size\n          };\n        };\n        fileReader.readAsDataURL(file);\n      }\n    },\n    addSpec: function () {\n      this.specs.push({\n        key: '',\n        value: ''\n      });\n    },\n    removeSpec: function (index) {\n      this.specs.splice(index, 1);\n    },\n    onchangeCategory: function () {\n      this.category = event.target.value;\n    },\n    addProduct: async function () {\n      const form = event.target;\n      const formData = new FormData(form);\n      formData.append(\"specs\", JSON.stringify(this.specs));\n      this.$refs[\"btnAddProduct\"].setAttribute(\"disabled\", \"disabled\");\n      const response = await axios.post(this.$apiURL + \"/admin/products/add\", formData, {\n        headers: this.$headers\n      });\n      this.$refs[\"btnAddProduct\"].removeAttribute(\"disabled\");\n      if (response.data.status == \"success\") {\n        form.reset();\n      }\n      swal.fire(\"Add product\", response.data.message, response.data.status);\n    },\n    getData: async function () {\n      const response = await axios.post(this.$apiURL + \"/getConfigurations\", null);\n      if (response.data.status == \"success\") {\n        const configurations = response.data.configurations;\n        this.categories = configurations.categories || [];\n      }\n    }\n  },\n  mounted: function () {\n    this.getData();\n  }\n};","map":{"version":3,"names":["axios","swal","data","categories","category","specs","images","methods","previewImages","self","files","$refs","a","length","file","fileReader","FileReader","onload","event","src","target","result","size","readAsDataURL","addSpec","push","key","value","removeSpec","index","splice","onchangeCategory","addProduct","form","formData","FormData","append","JSON","stringify","setAttribute","response","post","$apiURL","headers","$headers","removeAttribute","status","reset","fire","message","getData","configurations","mounted"],"sources":["C:\\Users\\PULSE Electronics\\OneDrive\\Desktop\\TechnoStoreAR\\admin\\src\\components\\AddProduct.vue"],"sourcesContent":["<template>\r\n    <!-- End Navbar -->\r\n    <div class=\"container-fluid py-4\">\r\n        <div class=\"row\">\r\n            <div class=\"col-md-12\">\r\n                <div class=\"card\">\r\n                    <div class=\"card-header\">\r\n                        <h4 class=\"font-weight-bolder\">Add product</h4>\r\n                    </div>\r\n\r\n                    <div class=\"card-body\">\r\n                        <form v-on:submit.prevent=\"addProduct\" enctype=\"multipart/form-data\">\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Name</label>\r\n                                <input type=\"text\" class=\"form-control\" name=\"name\" autocomplete=\"off\" required />\r\n                            </div>\r\n\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Description</label>\r\n                                <textarea name=\"description\" class=\"form-control\" style=\"margin-top: 50px;\" required></textarea>\r\n                            </div>\r\n\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Price (â‚¬)</label>\r\n                                <input type=\"number\" min=\"0\" autocomplete=\"off\" name=\"price\" class=\"form-control\" required />\r\n                            </div>\r\n\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Items in stock (0 means unlimited, for digital products)</label>\r\n                                <input type=\"number\" min=\"0\" name=\"itemsInStock\" autocomplete=\"off\" class=\"form-control\" required />\r\n                            </div>\r\n\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Categories</label>\r\n                                <select name=\"categories[]\" class=\"form-control\" v-on:change=\"onchangeCategory\">\r\n                                    <option value=\"\">Select category</option>\r\n                                    <option v-for=\"category in categories\" v-text=\"category\" v-bind:value=\"category\"></option>\r\n                                </select>\r\n                            </div>\r\n\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Add new category</label>\r\n                                <input type=\"text\" name=\"category\" autocomplete=\"off\" v-bind:value=\"category\" class=\"form-control\" />\r\n                            </div>\r\n\r\n                            <h3>Specifications</h3>\r\n                            <div class=\"row\" v-for=\"(spec, index) in specs\">\r\n                                <div class=\"col-md-6\">\r\n                                    <div class=\"input-group input-group-outline mb-3\">\r\n                                        <label class=\"form-label no-left-margin\">Key</label>\r\n                                        <input type=\"text\" v-model=\"spec.key\" autocomplete=\"off\" class=\"form-control\" required />\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div class=\"col-md-6\">\r\n                                    <div class=\"input-group input-group-outline mb-3\">\r\n                                        <label class=\"form-label no-left-margin\">Value</label>\r\n                                        <input type=\"text\" v-model=\"spec.value\" autocomplete=\"off\" class=\"form-control\" required />\r\n\r\n                                        <i class=\"fa fa-close\" style=\"position: relative;\r\n                                            top: 50px;\r\n                                            left: 10px;\r\n                                            cursor: pointer;\" v-on:click=\"removeSpec(index)\"></i>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n\r\n                            <button type=\"button\" v-on:click=\"addSpec\" class=\"btn bg-gradient-primary mt-4 mb-0\">Add specs</button>\r\n\r\n                            <div class=\"input-group input-group-outline mb-3\">\r\n                                <label class=\"form-label no-left-margin\">Images</label>\r\n                                <input type=\"file\" multiple accept=\"image/*\" name=\"images\" class=\"form-control\" v-on:change=\"previewImages\" ref=\"images\" required />\r\n                            </div>\r\n\r\n                            <div v-for=\"(image, index) in images\" class=\"row\" style=\"margin-top: 20px;\">\r\n                                <div class=\"col-md-8\">\r\n                                    <img v-bind:src=\"image.src\" style=\"width: 100%;\" />\r\n                                </div>\r\n                            </div>\r\n\r\n                            <div class=\"text-center\">\r\n                                <button type=\"submit\" class=\"btn btn-lg bg-gradient-primary btn-lg w-100 mt-4 mb-0\" ref=\"btnAddProduct\">Add product</button>\r\n                            </div>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n\r\n    import axios from \"axios\"\r\n    import swal from \"sweetalert2\"\r\n\r\n    export default {\r\n        data() {\r\n            return {\r\n                categories: [],\r\n                category: \"\",\r\n                specs: [],\r\n                images: []\r\n            }\r\n        },\r\n\r\n        methods: {\r\n            previewImages: function () {\r\n                const self = this\r\n                const files = this.$refs[\"images\"].files\r\n\r\n                for (let a = 0; a < files.length; a++) {\r\n                    const file = files[a]\r\n                    const fileReader = new FileReader()\r\n\r\n                    fileReader.onload = function (event) {\r\n                        self.images[a] = {\r\n                            src: event.target.result,\r\n                            size: files[a].size\r\n                        }\r\n                    }\r\n\r\n                    fileReader.readAsDataURL(file)\r\n                }\r\n            },\r\n\r\n            addSpec: function () {\r\n                this.specs.push({\r\n                    key: '',\r\n                    value: ''\r\n                })\r\n            },\r\n\r\n            removeSpec: function (index) {\r\n                this.specs.splice(index, 1)\r\n            },\r\n\r\n            onchangeCategory: function () {\r\n                this.category = event.target.value\r\n            },\r\n\r\n            addProduct: async function () {\r\n                const form = event.target\r\n                const formData = new FormData(form)\r\n                formData.append(\"specs\", JSON.stringify(this.specs))\r\n\r\n                this.$refs[\"btnAddProduct\"].setAttribute(\"disabled\", \"disabled\")\r\n\r\n                const response = await axios.post(\r\n                    this.$apiURL + \"/admin/products/add\",\r\n                    formData,\r\n                    {\r\n                        headers: this.$headers\r\n                    }\r\n                )\r\n\r\n                this.$refs[\"btnAddProduct\"].removeAttribute(\"disabled\")\r\n\r\n                if (response.data.status == \"success\") {\r\n                    form.reset()\r\n                }\r\n\r\n                swal.fire(\"Add product\", response.data.message, response.data.status)\r\n            },\r\n\r\n            getData: async function () {\r\n                const response = await axios.post(\r\n                    this.$apiURL + \"/getConfigurations\",\r\n                    null\r\n                )\r\n\r\n                if (response.data.status == \"success\") {\r\n                    const configurations = response.data.configurations\r\n                    this.categories = configurations.categories || []\r\n                }\r\n            }\r\n        },\r\n\r\n        mounted: function () {\r\n            this.getData()\r\n        }\r\n    }\r\n</script>\r\n\r\n<style>\r\n    .no-left-margin::before {\r\n        width: auto !important;\r\n    }\r\n</style>"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}